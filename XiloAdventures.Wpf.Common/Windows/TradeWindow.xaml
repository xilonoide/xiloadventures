<Window x:Class="XiloAdventures.Wpf.Common.Windows.TradeWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Comercio"
        Icon="/appicon.ico"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Width="900"
        Height="1200"
        Background="#1E1E1E"
        Foreground="#F5F5F5">
    <Window.Resources>
        <!-- Estilo para botones de accion -->
        <Style x:Key="ActionButtonStyle" TargetType="Button">
            <Setter Property="MinWidth" Value="120"/>
            <Setter Property="Height" Value="36"/>
            <Setter Property="Margin" Value="4"/>
            <Setter Property="Background" Value="#3A3A3A"/>
            <Setter Property="Foreground" Value="#F5F5F5"/>
            <Setter Property="BorderBrush" Value="#555555"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="RootBorder"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="4"
                                Padding="12,6">
                            <ContentPresenter x:Name="ContentPresenter"
                                              HorizontalAlignment="Center"
                                              VerticalAlignment="Center">
                                <ContentPresenter.RenderTransform>
                                    <TranslateTransform X="0" Y="0"/>
                                </ContentPresenter.RenderTransform>
                            </ContentPresenter>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="RootBorder" Property="Background" Value="#4A4A4A"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="RootBorder" Property="Background" Value="#2A2A2A"/>
                                <Setter TargetName="RootBorder" Property="BorderBrush" Value="#1A1A1A"/>
                                <Setter TargetName="ContentPresenter" Property="RenderTransform">
                                    <Setter.Value>
                                        <TranslateTransform X="1" Y="1"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="RootBorder" Property="Background" Value="#2A2A2A"/>
                                <Setter TargetName="RootBorder" Property="BorderBrush" Value="#1A1A1A"/>
                                <Setter TargetName="ContentPresenter" Property="RenderTransform">
                                    <Setter.Value>
                                        <TranslateTransform X="1" Y="1"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Estilo para botones de cantidad -->
        <Style x:Key="QuantityButtonStyle" TargetType="Button">
            <Setter Property="Width" Value="28"/>
            <Setter Property="Height" Value="28"/>
            <Setter Property="Background" Value="#3A3A3A"/>
            <Setter Property="Foreground" Value="#F5F5F5"/>
            <Setter Property="BorderBrush" Value="#555555"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="RootBorder"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="3">
                            <ContentPresenter x:Name="ContentPresenter"
                                              HorizontalAlignment="Center"
                                              VerticalAlignment="Center">
                                <ContentPresenter.RenderTransform>
                                    <TranslateTransform X="0" Y="0"/>
                                </ContentPresenter.RenderTransform>
                            </ContentPresenter>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="RootBorder" Property="Background" Value="#4A4A4A"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="RootBorder" Property="Background" Value="#2A2A2A"/>
                                <Setter TargetName="RootBorder" Property="BorderBrush" Value="#1A1A1A"/>
                                <Setter TargetName="ContentPresenter" Property="RenderTransform">
                                    <Setter.Value>
                                        <TranslateTransform X="1" Y="1"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="RootBorder" Property="Background" Value="#2A2A2A"/>
                                <Setter TargetName="RootBorder" Property="BorderBrush" Value="#1A1A1A"/>
                                <Setter TargetName="ContentPresenter" Property="RenderTransform">
                                    <Setter.Value>
                                        <TranslateTransform X="1" Y="1"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Estilo para ListBox -->
        <Style x:Key="TradeListBoxStyle" TargetType="ListBox">
            <Setter Property="Background" Value="#252525"/>
            <Setter Property="BorderBrush" Value="#444444"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Foreground" Value="#F5F5F5"/>
            <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"/>
        </Style>

        <!-- Estilo para items de ListBox -->
        <Style x:Key="TradeListBoxItemStyle" TargetType="ListBoxItem">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#F5F5F5"/>
            <Setter Property="Padding" Value="8,6"/>
            <Setter Property="Margin" Value="2"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListBoxItem">
                        <Border x:Name="Border"
                                Background="{TemplateBinding Background}"
                                BorderBrush="Transparent"
                                BorderThickness="1"
                                CornerRadius="4"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#3A3A3A"/>
                            </Trigger>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#4A6A4A"/>
                                <Setter TargetName="Border" Property="BorderBrush" Value="#5A8A5A"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Border Margin="8" CornerRadius="8" Background="#2A2A2A" BorderBrush="#444444" BorderThickness="1">
        <Grid Margin="16">
            <!-- CONTENIDO PRINCIPAL -->
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- HEADER: Titulo del comercio -->
                <TextBlock Grid.Row="0"
                           Text="COMERCIO"
                           FontSize="24"
                           FontWeight="Bold"
                           HorizontalAlignment="Center"
                           Foreground="#FFD700"
                           Margin="0,0,0,16"/>

                <!-- SECCION PRINCIPAL: Jugador y Comerciante -->
                <Grid Grid.Row="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="16"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Panel del Jugador (izquierda) -->
                    <Border Grid.Column="0" Background="#333333" CornerRadius="8" Padding="12">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <!-- Info del jugador -->
                            <StackPanel Grid.Row="0" Margin="0,0,0,12">
                                <TextBlock x:Name="PlayerNameText"
                                           Text="Jugador"
                                           FontSize="16"
                                           FontWeight="Bold"
                                           Foreground="#90EE90"/>
                                <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                                    <TextBlock Text="Dinero: "
                                               FontSize="14"
                                               Foreground="#AAAAAA"/>
                                    <TextBlock x:Name="PlayerMoneyText"
                                               Text="0"
                                               FontSize="14"
                                               FontWeight="SemiBold"
                                               Foreground="#FFD700"/>
                                </StackPanel>
                            </StackPanel>

                            <!-- Lista de inventario del jugador -->
                            <StackPanel Grid.Row="1">
                                <TextBlock Text="TU INVENTARIO"
                                           FontSize="12"
                                           FontWeight="SemiBold"
                                           Foreground="#90EE90"
                                           Margin="0,0,0,8"/>
                                <ListBox x:Name="PlayerItemsList"
                                         Height="500"
                                         Style="{StaticResource TradeListBoxStyle}"
                                         ItemContainerStyle="{StaticResource TradeListBoxItemStyle}"
                                         SelectionChanged="PlayerItemsList_SelectionChanged"
                                         MouseDoubleClick="PlayerItemsList_MouseDoubleClick">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <StackPanel>
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="{Binding Name}"
                                                               FontWeight="SemiBold"
                                                               Foreground="#F5F5F5"/>
                                                    <TextBlock Text=" x"
                                                               Foreground="#AAAAAA"/>
                                                    <TextBlock Text="{Binding Quantity}"
                                                               Foreground="#AAAAAA"/>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal" Margin="0,2,0,0">
                                                    <TextBlock Text="{Binding FormattedInfo}"
                                                               FontSize="11"
                                                               Foreground="#888888">
                                                        <TextBlock.Style>
                                                            <Style TargetType="TextBlock">
                                                                <Style.Triggers>
                                                                    <DataTrigger Binding="{Binding FormattedInfo}" Value="">
                                                                        <Setter Property="Visibility" Value="Collapsed"/>
                                                                    </DataTrigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </TextBlock.Style>
                                                    </TextBlock>
                                                    <TextBlock Text=" | "
                                                               FontSize="11"
                                                               Foreground="#555555">
                                                        <TextBlock.Style>
                                                            <Style TargetType="TextBlock">
                                                                <Style.Triggers>
                                                                    <DataTrigger Binding="{Binding FormattedInfo}" Value="">
                                                                        <Setter Property="Visibility" Value="Collapsed"/>
                                                                    </DataTrigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </TextBlock.Style>
                                                    </TextBlock>
                                                    <TextBlock Text="{Binding CalculatedPrice}"
                                                               FontSize="11"
                                                               FontWeight="SemiBold"
                                                               Foreground="#FFD700"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                            </StackPanel>

                            <!-- Controles de venta -->
                            <StackPanel Grid.Row="2" Margin="0,12,0,0">
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,8">
                                    <TextBlock Text="Cantidad: "
                                               VerticalAlignment="Center"
                                               Foreground="#AAAAAA"/>
                                    <Button x:Name="SellMinusBtn"
                                            Content="-"
                                            Style="{StaticResource QuantityButtonStyle}"
                                            Click="SellMinusBtn_Click"/>
                                    <TextBlock x:Name="SellQuantityText"
                                               Text="1"
                                               Width="40"
                                               TextAlignment="Center"
                                               VerticalAlignment="Center"
                                               FontWeight="Bold"
                                               FontSize="14"/>
                                    <Button x:Name="SellPlusBtn"
                                            Content="+"
                                            Style="{StaticResource QuantityButtonStyle}"
                                            Click="SellPlusBtn_Click"/>
                                </StackPanel>
                                <Button x:Name="SellButton"
                                        Content="VENDER"
                                        Style="{StaticResource ActionButtonStyle}"
                                        Background="#8B4513"
                                        HorizontalAlignment="Stretch"
                                        Click="SellButton_Click"
                                        IsEnabled="False"/>
                                <TextBlock x:Name="SellTotalText"
                                           Text=""
                                           FontSize="11"
                                           Foreground="#FFD700"
                                           HorizontalAlignment="Center"
                                           Margin="0,4,0,0"/>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- Panel del Comerciante (derecha) -->
                    <Border Grid.Column="2" Background="#333333" CornerRadius="8" Padding="12">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <!-- Info del comerciante -->
                            <StackPanel Grid.Row="0" Margin="0,0,0,12">
                                <TextBlock x:Name="MerchantNameText"
                                           Text="Comerciante"
                                           FontSize="16"
                                           FontWeight="Bold"
                                           Foreground="#FFD700"/>
                                <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                                    <TextBlock Text="Dinero: "
                                               FontSize="14"
                                               Foreground="#AAAAAA"/>
                                    <TextBlock x:Name="MerchantMoneyText"
                                               Text="Infinito"
                                               FontSize="14"
                                               FontWeight="SemiBold"
                                               Foreground="#FFD700"/>
                                </StackPanel>
                            </StackPanel>

                            <!-- Lista de items del comerciante -->
                            <StackPanel Grid.Row="1">
                                <TextBlock Text="EN VENTA"
                                           FontSize="12"
                                           FontWeight="SemiBold"
                                           Foreground="#FFD700"
                                           Margin="0,0,0,8"/>
                                <ListBox x:Name="MerchantItemsList"
                                         Height="500"
                                         Style="{StaticResource TradeListBoxStyle}"
                                         ItemContainerStyle="{StaticResource TradeListBoxItemStyle}"
                                         SelectionChanged="MerchantItemsList_SelectionChanged"
                                         MouseDoubleClick="MerchantItemsList_MouseDoubleClick">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <StackPanel>
                                                <TextBlock Text="{Binding Name}"
                                                           FontWeight="SemiBold"
                                                           Foreground="#F5F5F5"/>
                                                <StackPanel Orientation="Horizontal" Margin="0,2,0,0">
                                                    <TextBlock Text="{Binding FormattedInfo}"
                                                               FontSize="11"
                                                               Foreground="#888888">
                                                        <TextBlock.Style>
                                                            <Style TargetType="TextBlock">
                                                                <Style.Triggers>
                                                                    <DataTrigger Binding="{Binding FormattedInfo}" Value="">
                                                                        <Setter Property="Visibility" Value="Collapsed"/>
                                                                    </DataTrigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </TextBlock.Style>
                                                    </TextBlock>
                                                    <TextBlock Text=" | "
                                                               FontSize="11"
                                                               Foreground="#555555">
                                                        <TextBlock.Style>
                                                            <Style TargetType="TextBlock">
                                                                <Style.Triggers>
                                                                    <DataTrigger Binding="{Binding FormattedInfo}" Value="">
                                                                        <Setter Property="Visibility" Value="Collapsed"/>
                                                                    </DataTrigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </TextBlock.Style>
                                                    </TextBlock>
                                                    <TextBlock Text="{Binding CalculatedPrice}"
                                                               FontSize="11"
                                                               FontWeight="SemiBold"
                                                               Foreground="#FFD700"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                            </StackPanel>

                            <!-- Controles de compra -->
                            <StackPanel Grid.Row="2" Margin="0,12,0,0">
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,8">
                                    <TextBlock Text="Cantidad: "
                                               VerticalAlignment="Center"
                                               Foreground="#AAAAAA"/>
                                    <Button x:Name="BuyMinusBtn"
                                            Content="-"
                                            Style="{StaticResource QuantityButtonStyle}"
                                            Click="BuyMinusBtn_Click"/>
                                    <TextBlock x:Name="BuyQuantityText"
                                               Text="1"
                                               Width="40"
                                               TextAlignment="Center"
                                               VerticalAlignment="Center"
                                               FontWeight="Bold"
                                               FontSize="14"/>
                                    <Button x:Name="BuyPlusBtn"
                                            Content="+"
                                            Style="{StaticResource QuantityButtonStyle}"
                                            Click="BuyPlusBtn_Click"/>
                                </StackPanel>
                                <Button x:Name="BuyButton"
                                        Content="COMPRAR"
                                        Style="{StaticResource ActionButtonStyle}"
                                        Background="#2E7D32"
                                        HorizontalAlignment="Stretch"
                                        Click="BuyButton_Click"
                                        IsEnabled="False"/>
                                <TextBlock x:Name="BuyTotalText"
                                           Text=""
                                           FontSize="11"
                                           Foreground="#FFD700"
                                           HorizontalAlignment="Center"
                                           Margin="0,4,0,0"/>
                            </StackPanel>
                        </Grid>
                    </Border>
                </Grid>

            </Grid>
        </Grid>
    </Border>
</Window>
