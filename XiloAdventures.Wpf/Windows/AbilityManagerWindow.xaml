<Window x:Class="XiloAdventures.Wpf.Windows.AbilityManagerWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Gestión de Habilidades"
        Icon="/appicon.ico"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize"
        Width="900"
        Height="600"
        MinWidth="700"
        MinHeight="400"
        Background="#1E1E1E"
        Foreground="#F5F5F5">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="350"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Lista de habilidades -->
        <Grid Grid.Column="0" Margin="16">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <Grid Grid.Row="0" Margin="0,0,0,12">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0"
                           Text="Habilidades"
                           FontSize="18"
                           FontWeight="Bold"
                           VerticalAlignment="Center"/>

                <Button Grid.Column="1"
                        x:Name="AddAbilityButton"
                        Style="{StaticResource CommandButtonStyle}"
                        Content="+ Nueva"
                        Padding="12,6"
                        Click="AddAbilityButton_Click"/>
            </Grid>

            <Border Grid.Row="1"
                    Background="#2A2A2A"
                    BorderBrush="#444444"
                    BorderThickness="1"
                    CornerRadius="4">
                <ListBox x:Name="AbilityListBox"
                         Background="Transparent"
                         BorderThickness="0"
                         Foreground="#F5F5F5"
                         SelectionChanged="AbilityListBox_SelectionChanged">
                    <ListBox.ItemContainerStyle>
                        <Style TargetType="ListBoxItem">
                            <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                            <Setter Property="Background" Value="Transparent"/>
                            <Setter Property="Foreground" Value="#F5F5F5"/>
                            <Setter Property="Padding" Value="8"/>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#333333"/>
                                </Trigger>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter Property="Background" Value="#3A3A3A"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </ListBox.ItemContainerStyle>
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding TypeIcon}"
                                           FontSize="14"
                                           Margin="0,0,8,0"
                                           VerticalAlignment="Center"/>
                                <StackPanel>
                                    <TextBlock Text="{Binding Name}"
                                               FontWeight="SemiBold"
                                               Foreground="#F5F5F5"/>
                                    <TextBlock Text="{Binding TypeAndCost}"
                                               FontSize="11"
                                               Foreground="#888888"/>
                                </StackPanel>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </Border>
        </Grid>

        <!-- Editor de habilidad seleccionada -->
        <Border Grid.Column="1"
                Margin="0,16,16,16"
                Background="#2A2A2A"
                BorderBrush="#444444"
                BorderThickness="1"
                CornerRadius="4">
            <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="16">
                <StackPanel x:Name="EditorPanel" Visibility="Collapsed">
                    <!-- ID -->
                    <TextBlock Text="ID (interno)" FontWeight="SemiBold" Foreground="#888888" Margin="0,0,0,4"/>
                    <TextBox x:Name="IdTextBox"
                             Style="{StaticResource IpTextBox}"
                             Margin="0,0,0,12"
                             TextChanged="Field_Changed"/>

                    <!-- Nombre -->
                    <TextBlock Text="Nombre" FontWeight="SemiBold" Foreground="#AAAAAA" Margin="0,0,0,4"/>
                    <TextBox x:Name="NameTextBox"
                             Style="{StaticResource IpTextBox}"
                             Margin="0,0,0,12"
                             TextChanged="Field_Changed"/>

                    <!-- Descripcion -->
                    <TextBlock Text="Descripción" FontWeight="SemiBold" Foreground="#AAAAAA" Margin="0,0,0,4"/>
                    <TextBox x:Name="DescriptionTextBox"
                             Style="{StaticResource IpTextBox}"
                             Height="60"
                             TextWrapping="Wrap"
                             AcceptsReturn="True"
                             VerticalScrollBarVisibility="Auto"
                             Margin="0,0,0,12"
                             TextChanged="Field_Changed"/>

                    <!-- Tipo -->
                    <TextBlock Text="Tipo de Habilidad" FontWeight="SemiBold" Foreground="#AAAAAA" Margin="0,0,0,4"/>
                    <ComboBox x:Name="TypeComboBox"
                              Style="{StaticResource IpComboBox}"
                              Margin="0,0,0,12"
                              SelectionChanged="TypeComboBox_SelectionChanged">
                        <ComboBoxItem Content="Ataque" Tag="Attack"/>
                        <ComboBoxItem Content="Defensa" Tag="Defense"/>
                    </ComboBox>

                    <!-- Coste de Maná -->
                    <TextBlock Text="Coste de Maná" FontWeight="SemiBold" Foreground="#AAAAAA" Margin="0,0,0,4"/>
                    <TextBox x:Name="ManaCostTextBox"
                             Style="{StaticResource IpTextBox}"
                             Margin="0,0,0,12"
                             TextChanged="Field_Changed"/>

                    <!-- Valor de Ataque -->
                    <TextBlock Text="Bonus de Ataque (se suma a tirada)" FontWeight="SemiBold" Foreground="#FF6B6B" Margin="0,0,0,4"/>
                    <TextBox x:Name="AttackValueTextBox"
                             Style="{StaticResource IpTextBox}"
                             Margin="0,0,0,12"
                             TextChanged="Field_Changed"/>

                    <!-- Valor de Defensa -->
                    <TextBlock Text="Bonus de Defensa (se suma a tirada)" FontWeight="SemiBold" Foreground="#90EE90" Margin="0,0,0,4"/>
                    <TextBox x:Name="DefenseValueTextBox"
                             Style="{StaticResource IpTextBox}"
                             Margin="0,0,0,12"
                             TextChanged="Field_Changed"/>

                    <!-- Dano base -->
                    <TextBlock Text="Daño Base (adicional)" FontWeight="SemiBold" Foreground="#FF6B6B" Margin="0,0,0,4"/>
                    <TextBox x:Name="DamageTextBox"
                             Style="{StaticResource IpTextBox}"
                             Margin="0,0,0,12"
                             TextChanged="Field_Changed"/>

                    <!-- Curacion -->
                    <TextBlock Text="Curación" FontWeight="SemiBold" Foreground="#4EC9B0" Margin="0,0,0,4"/>
                    <TextBox x:Name="HealingTextBox"
                             Style="{StaticResource IpTextBox}"
                             Margin="0,0,0,12"
                             TextChanged="Field_Changed"/>

                    <!-- Boton eliminar -->
                    <Button x:Name="DeleteButton"
                            Style="{StaticResource CommandButtonStyle}"
                            Content="Eliminar Habilidad"
                            Background="#E74856"
                            Margin="0,16,0,0"
                            Padding="12,8"
                            HorizontalAlignment="Left"
                            Click="DeleteButton_Click"/>
                </StackPanel>
            </ScrollViewer>
        </Border>

        <!-- Mensaje cuando no hay seleccion -->
        <TextBlock Grid.Column="1"
                   x:Name="NoSelectionText"
                   Text="Selecciona una habilidad para editarla o crea una nueva"
                   FontSize="14"
                   Foreground="#666666"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center"/>
    </Grid>
</Window>
